<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>test detail</title>
        <h:outputStylesheet library="css" name="default.css" />
        <h:outputStylesheet library="css" name="table-style.css" />
    </h:head>
    <h:body>
        <h4>Test Result</h4>

        <f:metadata>
            <f:event type="preRenderView" listener="#{testBean.getTestResult()}" />
        </f:metadata>

        <h:panelGrid id="panel" columns="4" border="0" cellpadding="5" cellspacing="0">
            <h:outputLabel value='#{testBean.test.get(0).get("TEST_CLASS")}' />
            <h:outputLabel value='#{testBean.test.get(0).get("TEST_METHOD")}' />
            <h:outputLabel value="#{testBean.convertToDate(testBean.test.get(0).get('START_TIME'))}">
                <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss.SSS" />
            </h:outputLabel>
            <h:outputLabel value="#{testBean.convertToDate(testBean.test.get(0).get('STOP_TIME'))}">
                <f:convertDateTime type="date" pattern="yyyy-MM-dd HH:mm:ss.SSS" />
            </h:outputLabel>
            <h:outputLink value='#{testBean.test.get(0).get("LOG_URL")}' target="_blank">log</h:outputLink>
        </h:panelGrid>

        <ui:include src='#{testBean.test.get(0).get("LOG_URL")}' />

        <br />
        <h:panelGroup rendered="#{not empty testBean.statuses}" style="font-size: smaller">
            <p>Test Status</p>
            <h:dataTable value="#{testBean.statuses}"
                         var="status"
                         styleClass="order-table"
                         headerClass="order-table-header"
                         rowClasses="order-table-odd-row,order-table-even-row"
                         border="1">
                <h:column>
                    <f:facet name="header">index</f:facet>#{status.id}
                </h:column>
                <h:column>
                    <f:facet name="header">status name</f:facet>#{status.name}
                </h:column>
                <h:column>
                    <f:facet name="header">status value</f:facet>
                    <h:dataTable value="#{status.valueKeyList}" var="name"
                                 styleClass="order-table"
                                 headerClass="order-table-header"
                                 rowClasses="order-table-odd-row,order-table-even-row"
                                 border="1">
                        <h:column><pre>#{name}</pre></h:column>
                    <h:column><pre>#{status.value.get(name)}</pre></h:column>
                </h:dataTable>
            </h:column>
        </h:dataTable>
        </h:panelGroup>

    </h:body>
</html>
